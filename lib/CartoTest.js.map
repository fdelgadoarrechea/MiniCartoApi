{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2c896cfd6588d0d8719b","webpack:///./src/index.js","webpack:///./src/mapconfig.json","webpack:///./src/configreader.js","webpack:///./src/cartotemplate.js","webpack:///./src/maprenderer.js","webpack:///external \"leaflet\""],"names":["config","validateResponse","response","ok","Error","statusText","readResponseAsJSON","json","renderResult","mapsAPIresponse","cartoLayer","getUser","pushCartoLayer","getTemplateURL","renderer","getCenter","getZoom","renderMap","renderLayers","getLayers","logError","error","console","log","fetch","getURL","mode","method","body","JSON","stringify","getMapConfig","headers","then","catch","ConfigReader","_config","_url","_mapconfig","_user","_layers","_center","center","_zoom","zoom","slice","split","maps_api_config","user_name","layers","finalLayers","cartodblayer","forEach","element","type","options","push","urlTemplate","layer","CartoTemplate","user","_cdnURL","_templateURL","_layergroupid","layergroupid","MapRenderer","_currentMap","divid","map","setView","tileLayer","maxZoom","addTo"],"mappings":"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","file":"CartoTest.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"leaflet\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"CartoTest\", [\"leaflet\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CartoTest\"] = factory(require(\"leaflet\"));\n\telse\n\t\troot[\"CartoTest\"] = factory(root[\"leaflet\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2c896cfd6588d0d8719b","import mapconfig from './mapconfig.json';\nimport ConfigReader from './configreader.js';\nimport CartoTemplate from './cartotemplate.js';\nimport MapRenderer from './maprenderer.js';\n\nlet config = new ConfigReader(mapconfig);\n\nfunction validateResponse(response) {\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n  return response;\n}\n\nfunction readResponseAsJSON(response) {\n  return response.json();\n}\n\nfunction renderResult(mapsAPIresponse) {\n  let cartoLayer = new CartoTemplate(mapsAPIresponse, config.getUser());\n\n  config.pushCartoLayer(cartoLayer.getTemplateURL());\n  let renderer = new MapRenderer(config.getCenter(), config.getZoom());\n\n  renderer.renderMap('mapid');\n  renderer.renderLayers(config.getLayers());\n}\n\nfunction logError(error) {\n  console.log('Looks like there was a problem: \\n', error);\n}\n\nfetch(config.getURL(), {\n  mode: 'cors',\n  method: 'POST',\n  body: JSON.stringify(config.getMapConfig()),\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json'\n  }\n}).then(validateResponse).then(readResponseAsJSON).then(renderResult).catch(logError);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = {\"center\":\"[52.5897007687178, 52.734375]\",\"zoom\":4,\"maps_api_config\":{\"user_name\":\"documentation\",\"maps_api_template\":\"http://{user}.cartodb.com:80\"},\"layers\":[{\"type\":\"tiled\",\"options\":{\"urlTemplate\":\"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png\",\"minZoom\":\"0\",\"maxZoom\":\"18\",\"attribution\":\"&copy; <a href=\\\"http://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"}},{\"type\":\"CartoDB\",\"options\":{\"sql\":\"select * from european_countries_e\",\"cartocss\":\"/** choropleth visualization */\\n\\n#european_countries_e{\\n  polygon-fill: #FFFFB2;\\n  polygon-opacity: 0.8;\\n  line-color: #FFF;\\n  line-width: 1;\\n  line-opacity: 0.5;\\n}\\n#european_countries_e [ area <= 1638094] {\\n   polygon-fill: #B10026;\\n}\\n#european_countries_e [ area <= 55010] {\\n   polygon-fill: #E31A1C;\\n}\\n#european_countries_e [ area <= 34895] {\\n   polygon-fill: #FC4E2A;\\n}\\n#european_countries_e [ area <= 12890] {\\n   polygon-fill: #FD8D3C;\\n}\\n#european_countries_e [ area <= 10025] {\\n   polygon-fill: #FEB24C;\\n}\\n#european_countries_e [ area <= 9150] {\\n   polygon-fill: #FED976;\\n}\\n#european_countries_e [ area <= 5592] {\\n   polygon-fill: #FFFFB2;\\n}\",\"cartocss_version\":\"2.1.1\"}},{\"options\":{\"urlTemplate\":\"http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png\",\"minZoom\":\"0\",\"maxZoom\":\"18\",\"attribution\":\"&copy; <a href=\\\"http://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"},\"type\":\"tiled\"}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/mapconfig.json\n// module id = 1\n// module chunks = 0","export default class ConfigReader {\n  constructor(config) {\n    this._config = config;\n    this._url = '';\n    this._mapconfig = '';\n    this._user = '';\n    this._layers = [];\n    this._center = config.center;\n    this._zoom = config.zoom;\n  }\n\n  getCenter() {\n    let center = this._center;\n\n    this._center = center.slice(1, -1).split(',');\n    return this._center;\n  }\n\n  getZoom() {\n    return this._zoom;\n  }\n\n  getUser() {\n    this._user = this._config.maps_api_config.user_name;\n    return this._user;\n  }\n\n  getURL() {\n    this._url = `https://${this.getUser()}.carto.com/api/v1/map`;\n    return this._url;\n  }\n\n  getMapConfig() {\n    let layers = this._config.layers;\n    let finalLayers = [];\n    let cartodblayer = '';\n\n    layers.forEach(function (element) {\n      if (element.type === 'CartoDB') {\n        cartodblayer = {\n          'version': '1.3.1',\n          'layers': [{\n            'type': 'cartodb',\n            'options': element.options\n          }]\n        };\n        finalLayers.push('CartoDB');\n      } else {\n        finalLayers.push(element.options.urlTemplate);\n      }\n    });\n    this._mapconfig = cartodblayer;\n    this._layers = finalLayers;\n    return this._mapconfig;\n  }\n\n  pushCartoLayer(layer) {\n    let finalLayers = [];\n\n    this._layers.forEach(function (element) {\n      if (element === 'CartoDB') {\n        finalLayers.push(layer);\n      } else {\n        finalLayers.push(element);\n      }\n    });\n    this._layers = finalLayers;\n  }\n\n  getLayers() {\n    return this._layers;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/configreader.js","export default class CartoTemplate {\n  constructor(mapsAPIresponse, user) {\n    this._cdnURL = 'http://ashbu.cartocdn.com/';\n    this._user = user;\n    this._templateURL = '';\n    this._layergroupid = mapsAPIresponse.layergroupid;\n  }\n\n  getTemplateURL() {\n    this._templateURL = `${this._cdnURL}${this._user}/api/v1/map/${this._layergroupid}/0/{z}/{x}/{y}.png`;\n    return this._templateURL;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cartotemplate.js","import L from 'leaflet';\n\nexport default class MapRenderer {\n  constructor(center, zoom) {\n    this._center = center;\n    this._zoom = zoom;\n    this._templateURL = '';\n    this._currentMap = '';\n  }\n\n  renderMap(divid) {\n    this._currentMap = L.map(divid).setView(this._center, this._zoom);\n  }\n\n  renderLayers(layers) {\n    let map = this._currentMap;\n\n    layers.forEach(function (element) {\n      L.tileLayer(element, {\n        maxZoom: 18\n      }).addTo(map);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/maprenderer.js","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"leaflet\"\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}